<div class="jumbotron text-center">
  <h1>Jobs Scraper</h1>
</div>

<div class="p-5">

  <div class="row">
    <div class="col-lg-6 text-center form-login">
      <p>
        <%= form_for @record, url: records_path, method: :post  do |f| %>
          <br>
          <%= f.hidden_field :option, value: "sheet" %>
          <%= f.button "Search By Google Sheet", type: "submit", class: "form-control btn btn-primary" %>
        <% end %>
      </p>
    </div>

    <div class="vertical"/>

    <div class="col-lg-6 text-center form-login">
      <p>
        <%= form_for @record, url: records_path, method: :post  do |f| %>
          <%= f.hidden_field :option, value: "skill" %>
          <%= f.text_field :skills, placeholder: "Skills", class: "form-control" %>
          <br>
          <%= f.button "Search By Skills", type: "submit", class: "form-control btn btn-primary" %>
        <% end %>
      </p>
    </div>
  </div>

  <br><div class="horizontal"></div><br>

  <%- if @records.present? %>

    <div class="row">
      <div class="col-lg-2">
        <%= form_tag(records_path, method: :get) do %>
        <%= text_field_tag :search, params[:search], placeholder: "Search", class: "form-control" %>
      </div>

      <div class="col-lg-1">
        <%= submit_tag "Search", class: "form-control btn btn-primary" %>
      </div>

      <div class="col-lg-1">
        <%= link_to "Clear Search", records_path, class: "btn btn-danger" %>
      </div>

      <div class="col-lg-7"></div>

      <div class="col-lg-1">
        <%= link_to "Export to CSV", export_path, class: "btn btn-success m-w-150" %>
        <% end %>
      </div>

    </div>

    <br>
    <br>
    <br>

    <table class="table table-striped table-bordered">
      <thead class="thead-dark">
        <tr>
          <th scope="col">#</th>
          <th scope="col">Title</th>
          <th scope="col">Company</th>
          <th scope="col">Link</th>
          <th scope="col">Publish Date</th>
          <th scope="col">Publish Type</th>
          <th scope="col">Revenue</th>
          <th scope="col">Revenue Period</th>
          <th scope="col">Skill</th>
        </tr>
      </thead>
      <tbody>
        <%- @records.each.with_index(1) do |record, index| %>
          <%= render 'records/row', record: record, i: index%>
        <% end %>
      </tbody>
    </table>

  <% else %>

    <div class="row">
      <div class="col-lg-2">
        <%= form_tag(records_path, method: :get) do %>
          <%= text_field_tag :search, params[:search], placeholder: "Search", class: "form-control" %>
      </div>
      <div class="col-lg-1">
          <%= submit_tag "Search", class: "form-control btn btn-primary" %>
      </div>
      <div class="col-lg-1">
          <%= link_to "Clear Search", records_path, class: "btn btn-danger" %>
        <% end %>
      </div>
    </div>

    <div class="col-lg-12 text-center text-black-50">
      No Record Found!
    </div>
  <% end %>

</div>